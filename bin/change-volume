#!/bin/sh

function send_notification() {
  VOLUME=$(pactl get-sink-volume 0 | awk '/Volume:/ {sub(/%/, "", $5); print $5}')
  notify-send -a "change-volume" -u "low" -r 9990 -h int:value:"$VOLUME" -i "audio-volume-$1" "Volume: ${VOLUME}%" -t 2000
}

case $1 in
  up)
    pactl set-sink-mute 0 0
    pactl set-sink-volume 0 +5%
    send_notification "high"
    ;;
  down)
    pactl set-sink-mute 0 0
    pactl set-sink-volume 0 -5%
    send_notification "low"
    ;;
  mute)
    VOLUME=$(pactl get-sink-volume 0 | awk '/Volume:/ {sub(/%/, "", $5); print $5}')
    MUTED=$(pactl get-sink-mute 0 | awk '/Mute:/ {print $2}')
    case $MUTED in
      "yes" )
        pactl set-sink-mute 0 0
        if [ $VOLUME -gt 50 ]; then
          send_notification "high"
        elif [ $VOLUME -lt 50 ]; then
          send_notification "low"
        fi
        ;;
      "no" )
        pactl set-sink-mute 0 1
        send_notification "muted"
        ;;
    esac
    ;;
esac
